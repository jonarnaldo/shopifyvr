<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-blink-controls/dist/aframe-blink-controls.min.js"></script>
    <script src="https://unpkg.com/super-hands@^3.0.3/dist/super-hands.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.1.0/dist/aframe-physics-system.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.1.1/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.misc.min.js"></script>
    <script src="components/logEntity.js"></script>
    <script src="components/themePickerControls.js"></script>
    <script src="components/products.js"></script>
    <script src="components/positionTracker.js"></script>
    <script src="components/raycasterListen.js"></script>
  </head>
  <body>
    <a-scene physics="gravity: -0.5">
    <!-- preloaded assets -->
      <a-assets>
        <!-- static -->
        <a-asset-item id="store" src="assets/store.glb"></a-asset-item>
        <a-asset-item id="static-interior" src="assets/static_interior.glb"></a-asset-item>
        <a-asset-item id="floor" src="assets/store_floor.glb"></a-asset-item>
        <a-asset-item id="bookshelf-empty" src="assets/bookshelf_empty.glb"></a-asset-item>
        <audio id="store-music" src="assets/copacabana-180485.mp3" preload="auto"></audio>
        <!-- mixins -->
        <a-mixin id="grab-move"
          static-body="shape: sphere; sphereRadius: 0.02;"
          sphere-collider="objects: a-box"
        ></a-mixin>
      </a-assets>
      
      <!-- camera rig -->
      <a-entity id="player" rotation="0 90 0" position="10 2 -4">
        <!-- camera -->
        <a-entity id="camera" camera look-controls wasd-controls>
          <a-cursor id="cursor" fuse="true" fusetimeout="3000"></a-cursor>
        </a-entity>
        
        <!-- hand controls -->
        <a-entity
          mixin="grab-move"
          super-hands
          hand-controls="hand: left"
          blink-controls="collisionEntities: #cylinder, #ground"
        ></a-entity>
        <a-entity
          mixin="grab-move"
          super-hands
          hand-controls="hand: right"
          blink-controls="collisionEntities: #cylinder, #ground" 
        ></a-entity>
      </a-entity>
      
      <!-- scene -->
      <a-sky src="https://upload.wikimedia.org/wikipedia/commons/7/7d/Rainbow_on_the_Azores_%E2%80%93_360%C2%B0_drone_shot.jpg"></a-sky>
      <a-entity cursor position="8 1 -4"></a-entity>
      <a-box
        id="theme-picker"
        position="3 1 -4"
        hoverable
        theme-picker-controls
        sound="src: #store-music; on: hover-start"
      >
      </a-box>
      <a-entity
        id="store-model"
        gltf-model="#store"
        scale="1 1 1"
        visible="false"
      >
      </a-entity>
      <a-entity
        id="store-floor"
        gltf-model="#floor"
        static-body
        scale="1 1 1"
        position="0 0 -1"
        visible="false"
      >
      </a-entity>
      <a-entity
        id="store-interior"
        gltf-model="#static-interior"
        static-body
        scale="1 1 1"
        position="0 0 -1"
        visible="false"
      ></a-entity>
      <a-plane id="ground" static-body position="0 0 0" rotation="-90 0 0" width="100" height="100" color="#7BC8A4" products></a-plane>
    </a-scene>
  </body>
</html>